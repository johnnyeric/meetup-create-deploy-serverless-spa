import SetTopicAndQuestion from './components/SetTopicAndQuestion';
import Question from './components/Question';
import {
  Image,
  Appear,
  Notes,
  Invert,
  SplitRight,
  Horizontal,
  FullScreenCode,
} from 'mdx-deck';

<h2 style="margin:80px 0 0">Create and Deploy</h2>
<h2 style="margin:0">Serverless SPAs</h2>

<Horizontal>
  <img src="https://img.stackshare.io/service/6590/hasura_logo_vertical_black.png" alt="drawing" style="width:200px;margin-left: 10px;"/>
  <img src="https://miro.medium.com/max/418/1*vMEcwH5CYFXdaX-TTkfgKw.png" alt="drawing" style="width:220px;;margin-left: 10px;"/>
  <img src="https://miro.medium.com/max/7126/1*MLkTe5tPVv5BhXERsOO-MQ.png" alt="drawing" style="width:400px;height:170px;margin:auto 20px;"/>
</Horizontal>

<SetTopicAndQuestion />

---

### About me

#### @johnnyeric

<span>Software Engineer @Farfetch</span>
<br/>
<br/>
<span>Enjoy learning different technologies</span>

<SetTopicAndQuestion />

---

### What this talk is about

<ul>
  <Appear>
    <li>Developing new ideas is hard. Why?</li>
    <li>Modern technologies that make things easier</li>
    <li>
      <span>Focus on connecting some different concepts</span>
      <ul>
        <li>Serverless (Google Cloud Run)</li>
        <li>GraphQL (Hasura)</li>
        <li>SPAs (Project Template with Next.js)</li>
      </ul>
    </li>
  </Appear>
</ul>

<SetTopicAndQuestion topic={'f05f513a-19b6-46ac-b259-2ea4df0df2df'} />

---

### What this talk is about

<ul>
  <Appear>
    <li>Promotion of an architecture pattern</li>
    <li>Demonstration of a web application built using it</li>
    <li>Google Cloud Run, the new serverless kid on the block</li>
    <li>Let's share your ideas with the world!</li>
  </Appear>
</ul>

<SetTopicAndQuestion />

---

### What this talk is not about

- In depth explanation of each technology

##### Reach out if you are need help with a starting point

@johnnyeric

<SetTopicAndQuestion />

---

<Split>

  <div>
    <h3>Topic Voting</h3>
    <h5>Serverless Application</h5>
  </div>

  [meetup.johnnyeric.com](https://meetup.johnnyeric.com/)

  ![](https://meetup-create-deploy-serverless-one-fawn.now.sh/qrcode.png)

</Split>

<SetTopicAndQuestion topic={'9a1eb860-227a-4f1f-b1fb-880419bbe33a'} />

---

### Quiz Time

<Question question={'78539f11-cebe-436f-b0cb-931e56ddaf1a'} />

<SetTopicAndQuestion topic={'9a1eb860-227a-4f1f-b1fb-880419bbe33a'} question={'78539f11-cebe-436f-b0cb-931e56ddaf1a'} />

---

### Quiz Time

<Question question={'5626bffb-8387-4ac5-abb3-d5a8067deedc'} />

<SetTopicAndQuestion topic={'d87db03e-3f2c-46fb-a675-90ba248c8b97'} question={'5626bffb-8387-4ac5-abb3-d5a8067deedc'} />

---

### Challenges when building ideas

- Constantly evolving technology
- Overwhelming
- Hard time to quickly develop ideas

<SetTopicAndQuestion topic={'d87db03e-3f2c-46fb-a675-90ba248c8b97'} />

---

### Serverless

- What is Serverless? No Servers? No Virtual Machines?
  - Abstract complexity from managing Infrastructure
  - Scalability
  - Lower costs

<br/>
<img src="https://miro.medium.com/max/7126/1*MLkTe5tPVv5BhXERsOO-MQ.png" alt="drawing" style="width:400px;height:200px;"/>

<SetTopicAndQuestion topic={'2136d37c-d1d4-4dd5-a9eb-70155576cbbe'} />

---

### Quiz Time

<Question question={'06ae35a3-b12f-4bcc-9fe3-c3f02724bc26'} />

<SetTopicAndQuestion topic={'2136d37c-d1d4-4dd5-a9eb-70155576cbbe'} question={'06ae35a3-b12f-4bcc-9fe3-c3f02724bc26'} />

---

### SPA

- Single Page Application
- More like "single render application"
- Application flow managed on the browser
  
<SetTopicAndQuestion topic={'ea5bed17-c8c9-45e2-9d72-c2e0901843e7'} />

---

### Project template

- OpenFaaS template  
- Base setup with Next.js on Serverless mode
- Easy deployment of React Components
  
<SetTopicAndQuestion topic={'8ca7c369-2f5d-4d5b-9335-8486a7ec5328'} />

---

### Project template

- React Framework with SSR capabilities
- Concept of pages
- Serverless mode - since version 8

<br/>

<img src="https://seeklogo.com/images/N/next-js-logo-7929BCD36F-seeklogo.com.png" alt="drawing" style="width:200px;height:60px;"/>

<SetTopicAndQuestion topic={'8ca7c369-2f5d-4d5b-9335-8486a7ec5328'} />

---

### Project template

- OpenSource Serverless platform
- Function templates
- Command line tool for deployments

<br/>

![](https://miro.medium.com/max/1454/1*3e9V8u5vK1E_KHB0dk_8Nw.png)

<SetTopicAndQuestion topic={'8ca7c369-2f5d-4d5b-9335-8486a7ec5328'} />

---

### Quiz Time

<Question question={'f9e1dfc6-11d0-4acd-ac17-cb9a6fb771f4'} />

<SetTopicAndQuestion topic={'c4a16982-e739-4a8c-b218-576d4ff51245'} question={'f9e1dfc6-11d0-4acd-ac17-cb9a6fb771f4'} />

---

### GraphQL (Hasura)

- OpenSource
- Automatic GraphQL API based on PostgreSQL tables
- Triggers
- Authorization

<Horizontal>
  <img src="https://img.stackshare.io/service/6590/hasura_logo_vertical_black.png" alt="drawing" style="width:200px;"/>
  <img src="https://hackernoon.com/hn-images/1*RHQ7lpGDV_M3yWRa9DiR2g.png" alt="drawing" style="width:600px;margin-left: 10px;"/>
</Horizontal>

<SetTopicAndQuestion topic={'c4a16982-e739-4a8c-b218-576d4ff51245'} />

---

### 3 Factor App

- Architecture pattern
- Factors:
  1. Realtime GraphQL
  2. Reliable Eventing
  3. Async Serverless

<SetTopicAndQuestion topic={'d87db03e-3f2c-46fb-a675-90ba248c8b97'} />

---

### 3Factor Architecture

<img src="https://meetup-create-deploy-serverless-one-fawn.now.sh/3factor-new.jpg" alt="drawing" style="width:800px;"/>

<SetTopicAndQuestion topic={'8646ba53-d05d-4b88-9030-b1c88aaf47a0'} />

---

### Main Components

- Hasura instance
  - Hosted in cloud (Persistent VM)
- Serverless function to set the current topic and question
  - Hosted on Google Cloud Run
- SPA
  - Hosted on Google Cloud Run

<SetTopicAndQuestion topic={'8646ba53-d05d-4b88-9030-b1c88aaf47a0'} />

---

### Application Architecture

<img src="https://meetup-create-deploy-serverless-one-fawn.now.sh/architecture-v3.png" alt="drawing" style="width:800px;"/>

<SetTopicAndQuestion topic={'8646ba53-d05d-4b88-9030-b1c88aaf47a0'} />

---

### Hands On

<Split>
  <ol style="margin-left: 40px;text-align:left;font-size:0.9em">
    <li>Use template for SPAs</li>
    <li>Build container image</li>
    <li>Push image to gcr.io</li>
    <li>Deploy to Cloud Run</li>
  </ol>

  <img src="https://meetup-create-deploy-serverless-one-fawn.now.sh/architecture-v3.png" alt="drawing" style="width:800px;"/>

</Split>

<SetTopicAndQuestion topic={'ea05d876-326c-43ae-8b75-e76ccd0e71f2'} />

---

### Quiz Time

<Question question={'f9f0dc46-298e-470e-8a4f-c55d0af6ae5a'} />

<SetTopicAndQuestion topic={'ea05d876-326c-43ae-8b75-e76ccd0e71f2'} question={'f9f0dc46-298e-470e-8a4f-c55d0af6ae5a'} />

---

### Recap

- Simple serverless architecture
- Build projects quickly
- Automate things
- Sharing of ideas

<SetTopicAndQuestion />

---

### Reference Material

- [Meetup Project on Github](https://github.com/johnnyeric/meetup-create-deploy-serverless-spa/)
- [Create and Deploy Serverless SPAs](https://medium.com/@johnnyeric/create-and-deploy-serverless-spas-with-next-js-on-openfaas-or-knative-google-cloud-run-4b32a073292b)
- [OpenFaaS Next.js Template](https://github.com/johnnyeric/openfaas-serverless-nextjs-template)
- [Hasura](https://hasura.io/)
- [3Factor App](https://3factor.app)
- [Google Cloud Run](https://cloud.google.com/run/)
- [Next.js](https://nextjs.org/)
- [OpenFaaS](https://www.openfaas.com)
- [Heroku](https://heroku.com)

<SetTopicAndQuestion />

---

# Thank you!

<Appear>
  <span><h2>Questions?</h2></span>
</Appear>

<SetTopicAndQuestion />