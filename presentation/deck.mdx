import { swiss } from 'mdx-deck/themes'
import SetTopicAndQuestion from './components/SetTopicAndQuestion';
import Question from './components/Question';
import { Image, Appear, Notes } from 'mdx-deck';
import {
  Invert,
  Split,
  SplitRight,
  Horizontal,
  FullScreenCode,
} from 'mdx-deck'

<Notes>export const theme = swiss;</Notes>

<h2>Create and Deploy</h2>
<h2>Serverless SPAs</h2>

<Horizontal>
  <img src="https://img.stackshare.io/service/6590/hasura_logo_vertical_black.png" alt="drawing" style="width:180px;margin-left: 10px;"/>
  <img src="https://res.cloudinary.com/practicaldev/image/fetch/s--K2q0A5SX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/2elgd5zp07wkeilkna63.png" alt="drawing" style="width:260px;height:180px;;margin-left: 10px;"/>
  <img src="https://miro.medium.com/max/418/1*vMEcwH5CYFXdaX-TTkfgKw.png" alt="drawing" style="width:200px;;margin-left: 10px;"/>
  <img src="https://miro.medium.com/max/7126/1*MLkTe5tPVv5BhXERsOO-MQ.png" alt="drawing" style="width:380px;height:160px;;margin-left: 10px;"/>
</Horizontal>

<SetTopicAndQuestion />

---

<Split>

  <span>
    <h3>About me</h3>
    <h4>@johnnyeric</h4>
    <br/>
    <span>Software Engineer @Farfetch</span>
    <br/>
    <br/>
    <span>Enjoy learning different technologies</span>
  </span>

  <br />

  ### Demo

  [https://meetup.johnnyeric.com](https://meetup.johnnyeric.com/)

  ![](https://static-qrrg2apkb.now.sh/qrcode.png)

</Split>

<SetTopicAndQuestion topic={'9a1eb860-227a-4f1f-b1fb-880419bbe33a'} />

---

### Main topics
<ul>
  <Appear>
    <li>Serverless</li>
    <li>SPAs</li>
    <li>GraphQL</li>
    <li>Deployment</li>
  </Appear>
</ul>

<SetTopicAndQuestion topic={'9a1eb860-227a-4f1f-b1fb-880419bbe33a'} />

---

### Some Context

- Constantly evolving technology
- Overwhelming
- Hard time to quickly develop ideas

<SetTopicAndQuestion topic={'f05f513a-19b6-46ac-b259-2ea4df0df2df'} />

---

### Quiz Time

<Question question={'303a9643-3d69-4382-a7d5-7ae94e2df5b6'} />

<SetTopicAndQuestion topic={'f05f513a-19b6-46ac-b259-2ea4df0df2df'} question={'303a9643-3d69-4382-a7d5-7ae94e2df5b6'} />

---

### What this talk is about

- Focus on connecting some different technologies
- Define powerful architectures in simple ways
- Share your ideas with the world

<SetTopicAndQuestion topic={'f05f513a-19b6-46ac-b259-2ea4df0df2df'} />

---

### What this talk is not about

- In depth explanation of each technology

##### Reach out if you are need help with a starting point

@johnnyeric

<SetTopicAndQuestion topic={'f05f513a-19b6-46ac-b259-2ea4df0df2df'} />

---

<Question question={'78539f11-cebe-436f-b0cb-931e56ddaf1a'} />

<SetTopicAndQuestion question={'78539f11-cebe-436f-b0cb-931e56ddaf1a'} />

---

### Serverless

- Abstract complexity from managing Infrastructure
- Scale from 0 to n
  - Scale up when receive requests
  - Scale down when idle

<br/>

<img src="https://miro.medium.com/max/7126/1*MLkTe5tPVv5BhXERsOO-MQ.png" alt="drawing" style="width:400px;height:200px;"/>

<Notes>
  Notes about serverless
</Notes>

<SetTopicAndQuestion topic={'2136d37c-d1d4-4dd5-a9eb-70155576cbbe'} />

---

### Project template

- OpenFaaS template for Next.js on Serverless mode  
- Base setup for SPAs served with Next.js on Serverless mode
- Easy and quick deployment of React Components
  
<SetTopicAndQuestion topic={'8ca7c369-2f5d-4d5b-9335-8486a7ec5328'} />

---

### Project template

- React Framework with SSR capabilities
- Concept of pages
- Serverless mode - since version 8
  - Page as an independently deployable unit (lambda).
  - After SSR of the pages they act as a SPA

<br/>

<img src="https://seeklogo.com/images/N/next-js-logo-7929BCD36F-seeklogo.com.png" alt="drawing" style="width:200px;height:60px;"/>

<SetTopicAndQuestion topic={'8ca7c369-2f5d-4d5b-9335-8486a7ec5328'} />

---

### Project template

- Opensource Serverless platform
- Containers as unit of deployment
- Function templates

<br/>

![](https://miro.medium.com/max/1454/1*3e9V8u5vK1E_KHB0dk_8Nw.png)

<SetTopicAndQuestion topic={'8ca7c369-2f5d-4d5b-9335-8486a7ec5328'} />

---

### GraphQL

- Hasura
  - OpenSource
  - Automatic GraphQL API based on PostgreSQL tables
  - Triggers
  - Authorization

<img src="https://img.stackshare.io/service/6590/hasura_logo_vertical_black.png" alt="drawing" style="width:140px;"/>

<SetTopicAndQuestion topic={'c4a16982-e739-4a8c-b218-576d4ff51245'} />

---

### 3 Factor App

- Architecture pattern
- Factors:
  1. Realtime GraphQL
  2. Reliable Eventing
  3. Async Serverless

<SetTopicAndQuestion topic={'8646ba53-d05d-4b88-9030-b1c88aaf47a0'} />

---

### Application Architecture

<img src="https://static-qrrg2apkb.now.sh/3factor-architecture.png" alt="drawing" style="width:1160px;"/>

<SetTopicAndQuestion topic={'8646ba53-d05d-4b88-9030-b1c88aaf47a0'} />

---

### Main Components

- Hasura instance
  - Hosted on Heroku
- Serverless function to set the current topic and question
  - Hosted on Google Cloud Run
- SPA
  - Hosted on Google Cloud Run

<SetTopicAndQuestion topic={'8646ba53-d05d-4b88-9030-b1c88aaf47a0'} />

---

### Hands On

- Next.js Serverless Mode
- OpenFaaS template for Next.js on Serverless mode
- Build container image
- Tag image to [gcr.io](http://gcr.io) registry
- Deploy to Google Cloud Run

<SetTopicAndQuestion topic={'ea05d876-326c-43ae-8b75-e76ccd0e71f2'} />

---

### Conclusion

- Simple serverless architectures
- Build quickly
- Automate things
- Sharing of ideas

<SetTopicAndQuestion />

---

### Reference Material

- Next.js
- Heroku
- Hasura
- OpenFaaS
- OpenFaaS Next.js Template
- Google Cloud Run
- 3 Factor App
- [Create and Deploy Serverless SPAs with Next.js on OpenFaaS or Knative (Google Cloud Run)](https://medium.com/@johnnyeric/create-and-deploy-serverless-spas-with-next-js-on-openfaas-or-knative-google-cloud-run-4b32a073292b)

<SetTopicAndQuestion topic={'5f219fdb-915e-4f3f-b07c-f3dac7f58f6e'} />

---

# The end

<Appear>
  <span><h2>Questions?</h2></span>
</Appear>

<SetTopicAndQuestion topic={'5f219fdb-915e-4f3f-b07c-f3dac7f58f6e'} />